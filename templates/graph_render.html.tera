<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Team Scores Line Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h2>Team Score Over Time</h2>
    <canvas id="lineChartTotal" width="800" height="400"></canvas>

    <h2>Auto Score Over Time</h2>
    <canvas id="lineChartAuto" width="800" height="400"></canvas>

    <h2>Teleop Score Over Time</h2>
    <canvas id="lineChartTeleop" width="800" height="400"></canvas>

<script>
    const labels = [
        {% for item in team_data %}
            "{{ item.created_at }}"{% if not loop.last %},{% endif %}
        {% endfor %}
    ];

    // total score
    const dataTotal = {
        labels: labels,
        datasets: [
            {
                label: 'Team A Total',
                data: [
                    {% for item in team_data %}
                        {{ item.total_score }}{% if not loop.last %},{% endif %}
                    {% endfor %}
                ],
                fill: false,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            },
            {
                label: 'Team B Total',
                data: [
                    {% for item in team_data2 %}
                        {{ item.total_score }}{% if not loop.last %},{% endif %}
                    {% endfor %}
                ],
                fill: false,
                borderColor: 'rgb(255, 205, 86)',
                tension: 0.1
            }
        ]
    };

    // auto score
    const dataAuto = {
        labels: labels,
        datasets: [
            {
                label: 'Team A Auto',
                data: [
                    {% for item in team_data %}
                        {{ item.auto_total }}{% if not loop.last %},{% endif %}
                    {% endfor %}
                ],
                fill: false,
                borderColor: 'rgb(255, 99, 132)',
                tension: 0.1
            },
            {
                label: 'Team B Auto',
                data: [
                    {% for item in team_data2 %}
                        {{ item.auto_total }}{% if not loop.last %},{% endif %}
                    {% endfor %}
                ],
                fill: false,
                borderColor: 'rgb(54, 162, 235)',
                tension: 0.1
            }
        ]
    };

    // teleop score
    const dataTeleop = {
        labels: labels,
        datasets: [
            {
                label: 'Team A Teleop',
                data: [
                    {% for item in team_data %}
                        {{ item.teleop_total }}{% if not loop.last %},{% endif %}
                    {% endfor %}
                ],
                fill: false,
                borderColor: 'rgb(153, 102, 255)',
                tension: 0.1
            },
            {
                label: 'Team B Teleop',
                data: [
                    {% for item in team_data2 %}
                        {{ item.teleop_total }}{% if not loop.last %},{% endif %}
                    {% endfor %}
                ],
                fill: false,
                borderColor: 'rgb(255, 159, 64)',
                tension: 0.1
            }
        ]
    };

    // configs
    const configTotal = { type: 'line', data: dataTotal };
    const configAuto = { type: 'line', data: dataAuto };
    const configTeleop = { type: 'line', data: dataTeleop };

    new Chart(document.getElementById('lineChartTotal'), configTotal);
    new Chart(document.getElementById('lineChartAuto'), configAuto);
    new Chart(document.getElementById('lineChartTeleop'), configTeleop);
</script>
</body>
</html>
