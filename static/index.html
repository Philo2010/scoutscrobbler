<!DOCTYPE html>

<html>
    <head>
        <title>Scout Scrobbler</title>
        <link rel="stylesheet" href="style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <h1><em class="wave-text">SCOUT</em></h1>
        <h1><em class="wave-text">SCROBBLER</em></h1>

        <p>Simple Scouter by Philip Bedrosian</p>

        <div class="login-menu" id="login-menu">
            <p style="font-size: 10px;">Logined in as: AHH | Can read: ✓ | Can write: ✓</p>
        </div>

        <a href="login_page.html">
            <div class="buttons">
                <p>Login</p>
            </div>
        </a>
        <br>

        <a href="scout_b">
            <div class="buttons">
                <p>Scout</p>
            </div>
        </a>
        <br>

        <a href="/pit_page">
            <div class="buttons">
                <p>Pit</p>
            </div>
        </a>
        <br>

        <a href="/pit_page/auto.html">
            <div class="buttons">
                <p>Pit(Auto)</p>
            </div>
        </a>
        <br>
        
        <a href="search_page">
            <div class="buttons">
                <p>Search</p>
            </div>
        </a>
        <br>

        <a href="entries">
            <div class="buttons">
                <p>entries</p>
            </div>
        </a>
        <br>

        <a href="teams">
            <div class="buttons">
                <p>Team Avarages</p>
            </div>
        </a>
        <br>

        <a href="team_e">
            <div class="buttons">
                <p>Team Avarages(Event)</p>
            </div>
        </a>
        <br>

        <a href="graph_page">
            <div class="buttons">
                <p>Graph (Team preformance over time)</p>
            </div>
        </a>
        <br>
        
        <a href="queue_page/">
            <div class="buttons">
                <p>Queue</p>
            </div>
        </a>
    </body>

    <script>
    // Btw this code is copied i really dont like js so dont blame me :<
    function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) === 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }

    const menu = document.getElementById("login-menu");
    const username = getCookie("name");
    const can_read = getCookie("can_read");
    const can_write = getCookie("can_write");

    if (username === "") {
        menu.innerHTML = "<p>Not logged in! Please login!</p>";
    } else {
        menu.innerHTML = `<p style="font-size: 10px;">Logged in as: ${username} | Can read: ${can_read} | Can write: ${can_write}</p>`;
    }

    // Function to apply wave effect statically (e.g. on SCOUT / SCROBBLER headers)
    function applyWaveEffect() {
        const elements = document.querySelectorAll('.wave-text');

        elements.forEach(el => {
            const text = el.textContent;
            el.innerHTML = ''; // Clear original text

            [...text].forEach((char, i) => {
                const span = document.createElement('span');
                span.textContent = char;
                span.classList.add('wave-letter');
                span.style.animationDelay = `${i * 0.1}s`;
                el.appendChild(span);
            });

            el.classList.add('animated');
        });
    }

    applyWaveEffect();

    // Handle hover wave effect on <a> links
    document.querySelectorAll('a').forEach(link => {
        const p = link.querySelector('p');
        if (!p) return;

        const originalText = p.textContent;
        p.dataset.original = originalText;

        link.addEventListener('mouseenter', () => {
            if (p.dataset.isAnimated === "true") return;

            p.innerHTML = '';
            [...originalText].forEach((char, i) => {
                const span = document.createElement('span');
                span.textContent = char;
                span.classList.add('wave-letter');
                span.style.animationDelay = `${i * 0.1}s`;
                p.appendChild(span);
            });

            p.classList.add('animated');
            p.dataset.isAnimated = "true";
        });

        link.addEventListener('mouseleave', () => {
            p.classList.remove('animated');
            p.textContent = p.dataset.original;
            p.dataset.isAnimated = "false";
        });
    });
</script>

</html>