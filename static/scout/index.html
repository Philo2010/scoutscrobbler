<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi-step Form</title>
  <link rel="stylesheet" href="scout/style.css">
</head>
<body>
  <form id="scouterForm" method="post">
    
    <!-- Step 1 -->
    <div class="step active">
      <h2>Auto</h2>
                L1: <input name="auto-L1" id="auto-L1" type="number"> <br>
                L2: <input name="auto-L2" id="auto-L2" type="number"> <br>
                L3: <input name="auto-L3" id="auto-L3" type="number"> <br>
                L4: <input name="auto-L4" id="auto-L4" type="number"> <br>
                Algae (Processor): <input name="auto-alpro" id="auto-alpro" type="number"> <br>
                Algae (Barge): <input name="auto-albar" id="auto-albar" type="number"> <br>
                Algae (Remove): <input name="auto-alrem" id="auto-alrem" type="number"> <br>
                <div class="buttons">
                  <button type="button" onclick="nextStep()">Next</button>
                </div>
    </div>

    <!-- Step 2 -->
    <div class="step">
        <h2>Teleop</h2>
                L1: <input name="teleop-L1" id="teleop-L1" type="number"> <br>
                L2: <input name="teleop-L2" id="teleop-L2" type="number"> <br>
                L3: <input name="teleop-L3" id="teleop-L3" type="number"> <br>
                L4: <input name="teleop-L4" id="teleop-L4" type="number"> <br>
                Algae (Processor): <input name="teleop-alpro" id="teleop-alpro" type="number"> <br>
                Algae (Barge): <input name="teleop-albar" id="teleop-albar" type="number"> <br>
                Algae (Remove): <input name="teleop-alrem" id="teleop-alrem" type="number"> <br>
                <div class="buttons">
                  <button type="button" onclick="prevStep()">Back</button>
                  <button type="button" onclick="nextStep()">Next</button>
                </div>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <h3>Defensive ability</h3>
                <div class="slider-container">
                <input type="range" name="rating" id="rating" min="1" max="5" step="1" value="3">
                <div class="ticks">
                  <span>1</span>
                  <span>2</span>
                  <span>3</span>
                  <span>4</span>
                  <span>5</span>
                </div>
              </div>
                <br>
                <label for="climb">Climb</label>
                <select name="climb" id="climb">
                    <option value="deep">Deep</option>
                    <option value="shallow">Shallow</option>
                    <option value="park">Park</option>
                    <option value="none">None</option>
                </select> 
                <h3>Comments</h3>
                <textarea name="comment" id="commit"></textarea>
                <div class="buttons">
                  <button type="button" onclick="prevStep()">Back</button>
                </div>
                <br>
                <input type="submit">
    </div>

  </form>

  <script>
    let currentStep = 0;
    const steps = document.querySelectorAll(".step");

    function showStep(index) {
      steps.forEach((step, i) => {
        step.classList.toggle("active", i === index);
      });
    }

    function nextStep() {
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
      }
    }

    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
      }
    }
    document.getElementById('scouterForm').addEventListener('submit', function(event) {
            console.log("Sending data!");
            event.preventDefault();  // Prevent form from submitting the traditional way

            // Collect form data
            const formData = new FormData(this);

            // Send POST request with form data and cookies
            fetch('/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(formData).toString(), // Convert FormData to URL-encoded string
                credentials: 'include', // This ensures that cookies are sent along with the request
            })
            .then(data => {
                console.log('Success:', data);
                // Optionally, display a success message or reset the form
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
  </script>
</body>
</html>
